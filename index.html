<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ú–∞—Ç—Ä–∏—Ü–∞ –≠–π–∑–µ–Ω—Ö–∞—É—ç—Ä–∞ Mobile</title>
    <style>
        * { box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
            background: #f8f9fa; 
            margin: 0; 
            padding: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h1 { font-size: 1.5rem; margin: 10px 0 5px; color: #222; }
        p { font-size: 0.9rem; color: #666; margin-bottom: 15px; text-align: center; }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–µ—Ç–∫–∞: 1 –∫–æ–ª–æ–Ω–∫–∞ –Ω–∞ –º–æ–±–∏–ª–∫–∞—Ö, 2 –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ */
        .matrix { 
            display: grid; 
            grid-template-columns: 1fr; 
            gap: 12px; 
            width: 100%; 
            max-width: 500px; 
        }

        @media (min-width: 768px) {
            .matrix { grid-template-columns: 1fr 1fr; max-width: 900px; }
        }

        .quadrant { 
            padding: 12px; 
            border-radius: 12px; 
            box-shadow: 0 2px 8px rgba(0,0,0,0.05); 
            display: flex; 
            flex-direction: column;
            min-height: 200px;
        }

        .q1 { background: #fff1f1; border-left: 6px solid #ff4d4d; }
        .q2 { background: #f0f7ff; border-left: 6px solid #007bff; }
        .q3 { background: #fff9e6; border-left: 6px solid #ffc107; }
        .q4 { background: #f2faf3; border-left: 6px solid #28a745; }

        h3 { margin: 0 0 10px 0; font-size: 0.95rem; display: flex; align-items: center; gap: 5px; }

        /* –ü–æ–ª–µ –≤–≤–æ–¥–∞ –∏ –∫–Ω–æ–ø–∫–∏ */
        .input-group { 
            display: flex; 
            gap: 8px; 
            margin-bottom: 10px; 
            background: white;
            padding: 4px;
            border-radius: 8px;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
        }

        input[type="text"] { 
            flex-grow: 1; 
            border: none; 
            padding: 10px; 
            font-size: 16px; /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∑—É–º –Ω–∞ iOS */
            outline: none;
            background: transparent;
        }

        .btn { 
            border: none; 
            border-radius: 6px; 
            display: flex; 
            align-items: center; 
            justify-content: center;
            transition: active 0.1s;
            touch-action: manipulation;
        }
        
        .btn:active { transform: scale(0.95); opacity: 0.7; }

        .attach-btn { background: #e9ecef; color: #495057; width: 40px; font-size: 1.2rem; }
        .add-btn { background: #333; color: white; width: 40px; font-size: 1.4rem; }

        /* –°–ø–∏—Å–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
        .task-list { list-style: none; padding: 0; margin: 0; }
        .item { 
            background: white; 
            margin-bottom: 8px; 
            padding: 12px; 
            border-radius: 8px; 
            border: 1px solid rgba(0,0,0,0.05);
        }

        .item-content { display: flex; justify-content: space-between; align-items: center; gap: 10px; }
        .item-text { font-size: 0.95rem; color: #333; word-break: break-word; }

        .item-actions { 
            display: flex; 
            gap: 15px; 
            margin-top: 8px; 
            padding-top: 8px; 
            border-top: 1px solid #f0f0f0; 
        }

        .action-link { font-size: 0.8rem; text-decoration: none; color: #007bff; font-weight: 600; }
        .del-icon { color: #ff4d4d; font-size: 1.1rem; padding: 5px; cursor: pointer; }

        .hidden-input { display: none; }
    </style>
</head>
<body>

    <h1>–ú–∞—Ç—Ä–∏—Ü–∞ Master</h1>
    <p>–ù–∞–∂–º–∏ üìé —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å —Ñ–∞–π–ª</p>

    <div class="matrix">
        <div class="quadrant q1">
            <h3>üî• –°—Ä–æ—á–Ω–æ / –í–∞–∂–Ω–æ</h3>
            <div class="input-group">
                <input type="text" id="input1" placeholder="–ó–∞–¥–∞–Ω–∏–µ...">
                <button class="btn attach-btn" onclick="triggerFile(1)">üìé</button>
                <input type="file" id="file1" class="hidden-input" onchange="addFile(1)">
                <button class="btn add-btn" onclick="addTask(1)">+</button>
            </div>
            <ul class="task-list" id="list1"></ul>
        </div>

        <div class="quadrant q2">
            <h3>üìÖ –ü–ª–∞–Ω–∏—Ä—É–π</h3>
            <div class="input-group">
                <input type="text" id="input2" placeholder="–ó–∞–¥–∞–Ω–∏–µ...">
                <button class="btn attach-btn" onclick="triggerFile(2)">üìé</button>
                <input type="file" id="file2" class="hidden-input" onchange="addFile(2)">
                <button class="btn add-btn" onclick="addTask(2)">+</button>
            </div>
            <ul class="task-list" id="list2"></ul>
        </div>

        <div class="quadrant q3">
            <h3>‚ö° –î–µ–ª–µ–≥–∏—Ä—É–π</h3>
            <div class="input-group">
                <input type="text" id="input3" placeholder="–ó–∞–¥–∞–Ω–∏–µ...">
                <button class="btn attach-btn" onclick="triggerFile(3)">üìé</button>
                <input type="file" id="file3" class="hidden-input" onchange="addFile(3)">
                <button class="btn add-btn" onclick="addTask(3)">+</button>
            </div>
            <ul class="task-list" id="list3"></ul>
        </div>

        <div class="quadrant q4">
            <h3>üå± –û—Ç–ª–æ–∂–∏</h3>
            <div class="input-group">
                <input type="text" id="input4" placeholder="–ó–∞–¥–∞–Ω–∏–µ...">
                <button class="btn attach-btn" onclick="triggerFile(4)">üìé</button>
                <input type="file" id="file4" class="hidden-input" onchange="addFile(4)">
                <button class="btn add-btn" onclick="addTask(4)">+</button>
            </div>
            <ul class="task-list" id="list4"></ul>
        </div>
    </div>

    <script>
        function triggerFile(n) { document.getElementById(`file${n}`).click(); }

        function addTask(n) {
            const input = document.getElementById(`input${n}`);
            if (input.value.trim()) {
                createItem(n, input.value, null);
                input.value = "";
            }
        }

        function addFile(n) {
            const file = document.getElementById(`file${n}`).files[0];
            if (file) {
                createItem(n, file.name, file);
                document.getElementById(`file${n}`).value = "";
            }
        }

        function createItem(n, text, file) {
            const list = document.getElementById(`list${n}`);
            const li = document.createElement('li');
            li.className = 'item';
            
            let actions = '';
            if (file) {
                const url = URL.createObjectURL(file);
                actions = `
                    <div class="item-actions">
                        <a href="${url}" download="${file.name}" class="action-link">–°–ö–ê–ß–ê–¢–¨</a>
                        <span class="action-link" onclick="shareContent('${text}')">–ü–û–î–ï–õ–ò–¢–¨–°–Ø</span>
                    </div>`;
            }

            li.innerHTML = `
                <div class="item-content">
                    <span class="item-text">${file ? 'üìÑ' : '‚úÖ'} ${text}</span>
                    <span class="del-icon" onclick="this.closest('.item').remove()">‚úï</span>
                </div>
                ${actions}
            `;
            list.prepend(li); // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –≤–≤–µ—Ä—Ö
        }

        function shareContent(name) {
            if (navigator.share) {
                navigator.share({ title: '–§–∞–π–ª –∏–∑ –º–∞—Ç—Ä–∏—Ü—ã', text: name, url: window.location.href });
            } else {
                alert('–°—Å—ã–ª–∫–∞ –Ω–∞ ' + name + ' —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!');
            }
        }
    </script>
</body>
</html>
